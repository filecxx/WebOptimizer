
Std.ui.module("SwitchBox",{parent:"widget",events:"change",option:{level:1,defaultClass:"StdUI_SwitchBox",value:null,items:null,theme:"blue",width:"auto",valueType:"value"},private:{selected:null},initialize:{initEvents:function(){var n=this,u=n.opts;n[0].unselect(!0).delegate("click","._item",function(e){var t,i;n.enable()&&(t=n._items.items(this.index("._item")),i=u.valueType,t!==n._selected&&(n._selected=t,"value"===i?u.value=t.value:"index"===i?u.value=n._items.itemIndex(t):"text"===i&&(u.value=t.text),n.emit("change",u.value)),n.initHandle()[1].html(t.dom.html()).animateTo({width:t.dom.width()-2,left:t.dom.offsetLeft()},100))})}},extend:{beforeRender:function(){this.call_opts(["value"])},render:function(){this.updateLayout(),this.refresh()},width:function(){var e=this;e.opts;e.rendered&&e.updateLayout()},height:function(e){var t=this;"auto"!==e&&(isNumber(e)||(e=t.height()),t[0].lineHeight(e-=t.boxSize.height),t[1]&&t[1].height(e-2).lineHeight(e-2))}},protected:{length:0,initHandle:function(){var e,t=this;return null==t[1]&&(e=t.height()-t.boxSize.height-2,t[1]=newDiv("_handle").appendTo(t[0]),t[1].height(e).lineHeight(e)),t},updateLayout:function(){var i=this,n=i.opts.width,u=i.boxSize.width;return"auto"===n?i:(isNumber(n)||(n=i.width()),i._items.items(function(e,t){t.dom.width(n/i.length-u+(0!==e?1:0))}),i.refresh())}},public:{items:function(e,t){return this._items.items(e,t)},refresh:function(){var e=this,t=e.opts.width,i=e._selected;return null===i||(e[1]||e.initHandle(),t=isNumber(t)?t/e.length-e.boxSize.width:i.dom.outerWidth(),e[1].dom.innerHTML=i.dom.html(),e[1].css({left:i.dom.offsetLeft(),width:t-2})),e},value:function(i){var n=this,u=n.opts.valueType;return n.opt("value",i,function(){n._items.items(function(e,t){if("value"===u&&t.value===i||"index"===u&&i===e||"text"===u&&t.text===i)return n._selected=t}),n.rendered&&n.refresh()&&n.emit("change",i)})},insert:function(e,t,i,n){var u=this,a=newDiv("_item");return isObject(e)&&(t=e.value,e=e.text),isString(e)&&a.append(newDiv("_name").html(e)),0<u.length++&&u.DOMMap.items.append(newDiv("_sep")),u.DOMMap.items.insert(Std.dom.get(a),i),u._items.insert({text:e,value:t,dom:a},i),!1!==n&&u.rendered&&u.updateLayout(),u},append:function(e,t,i){var n=this;return isArray(e)?Std.each(e,function(e,t){n.insert(t,null,null,!1)}):n.insert(e,t,null,!1),!1!==i&&n.rendered&&n.updateLayout(),n}},main:function(e,t){e._items=Std.items(),e.DOMMap={items:newDiv("_items")},e[0].append(e.DOMMap.items),e.initEvents(),t.items&&e.append(t.items)},support:{rule:{content:"value",children:function(e){this.append(e)}},html:{create:function(e){this.append(e.children(function(e,t){return{value:t.value(),text:t.html()}}))}}}});
"undefined;"