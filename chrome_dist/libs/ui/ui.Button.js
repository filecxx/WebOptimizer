
Std.ui.module("Button",{nodeName:"a",b:"widget",c:"checked mousedown mouseup click press longpress focus blur cellClick",e:{level:2,text:"Button",href:"",icon:null,cells:null,align:"center",theme:"default",target:"",defaultClass:"StdUI_Button",focusedClass:"focused",checkable:!1,checked:!1,toggleable:!0,styleType:"text",minWidth:16,minHeight:16,iconWidth:18,iconHeight:18,cellWidth:18,cellSpacing:5,width:"auto",height:"auto"},h:{fixedTableLayout:!1},g:{render:function(){var t=this;t.opts;t.initEvents(),t.initMouse()},width:function(t){var e=this,i=e.opts,n=e.boxSize,o=n.width,n=n.extraWidth,c=e.DOMMap,s=e.DOMTreeLevel,r=c.boxTable,c=c.mainTable;e._fixedTableLayout&&(1<s?r.removeStyle("width tableLayout"):3===s&&c.removeStyle("width tableLayout"),e._fixedTableLayout=!1),1<s&&isNumber(t)&&(2===s?r.width()>t-o-n&&(r.css({width:t-o-n,tableLayout:"fixed"}),e._fixedTableLayout=!0):3===s&&(c.width()>t-o-n&&(c.css("tableLayout","fixed"),e._fixedTableLayout=!0),c.css("width",t-o-n),r.width()>t-o-n&&(s=Std.count(e._cells)*(i.cellWidth+i.cellSpacing),t=c.width()-s,r.css({width:t,tableLayout:"fixed"}),e._fixedTableLayout=!0)))},height:function(t){var e=this,i=e.opts,n=e.boxSize,o=e.DOMMap,c=e.DOMTreeLevel;1===c&&isNumber(t)?(o.text&&o.text.lineHeight(t-n.height-n.extraHeight),o.icon&&o.icon.marginTop((t-n.height-n.extraHeight-e.opts.iconHeight)/2)):1<c&&(o.boxTable.height(t=isNumber(t)?t-n.height-n.extraHeight:t),i.iconHeight>t&&o.icon&&e.iconHeight(t))}},n:{initEvents:function(){var i=this,n=i.opts,o=!1;return i[0].on("focusin",function(t){var e=n.focusedClass;isEmpty(e)||i.addClass(e),i.emit("focus",t),!1===o&&(i.initKeyboard(),i.on("focusout",function(t){isEmpty(e)||i.removeClass("focused"),i.emit("blur",t)}),o=!0)}),i},initMouse:function(){var e=this,i=e.opts;return e[0].mouse({unselect:!0,down:function(t){e.emit("mousedown",t)},up:function(t){e.emit("mouseup",t)},click:function(t){i.enable?(e.press(t).emit("click",t),Std.func(i.click).call(e,t)):t.preventDefault()},longpress:function(t){e.emit("longpress",t)}}),e},initKeyboard:function(){var e=this;return e[0].keyboard({classStatus:!0,keyCode:function(t){if(32===t.which||13===t.which)return!0},down:function(t){t.preventDefault()},press:function(t){if(e.opts.enable)return e.press(t),!1}}),e}},i:{DOMTreeLevel:1,initDOMTree:function(){function t(t){u=s.boxTable=newDom("table","_buttonBox").append(s.boxTbody=newDom("tbody").append(t))}function e(){return s.iconTD=newDom("td","_icon").append(s.icon=newDiv("_icon")),c.icon&&Std.icon.update(s.icon,c.icon,{width:c.iconWidth,height:c.iconHeight}),"textBesideIcon"===a&&s.iconTD.width(c.iconWidth).height(c.iconHeight),s.iconTD}function i(){return s.text=newDom("td","_text").html(c.text)}var n,o=this,c=o.opts,s=o.DOMMap={},r=1,a=c.styleType,u=null;isEmpty(o._cells)||(r=3),"text"===a?1==r?s.text=newDiv("_text").html(c.text).appendTo(o):t(s.tr1=newDom("tr").append(i())):"icon"===a?1==r?(o[0].append(s.icon=newDiv("_icon")),c.icon&&Std.icon.update(s.icon,c.icon,{width:c.iconWidth,height:c.iconHeight})):t(s.tr1=newDom("tr").append(e())):"textBesideIcon"===a?(t(s.tr1=newDom("tr").append([e(),i()])),1===r&&(r=2)):"textUnderIcon"===a&&(t([s.tr1=newDom("tr").append(e()),s.tr2=newDom("tr").append(i())]),1===r&&(r=2)),null!==u&&(3===r?(n=u,s.mainTable=newDom("table","_mainTable").append(s.mainTbody=newDom("tbody").append(s.mainTR1=newDom("tr").append([s.mainTD1=newDom("td").append(n)]))).appendTo(o[0]),Std.each(o._cells,function(t,e){s.mainTR1.append(e)})):u.appendTo(o[0])),o.DOMTreeLevel=r,o.call_opts({align:"center"},!0)}},j:{checkable:function(t){return this.opt("checkable",t)},toggleable:function(t){return this.opt("toggleable",t)},target:function(t){return this.opt("target",t,function(){this[0].attr("target",t)})},href:function(t){var e=this;return this.opt("href",t,function(){isEmpty(t)?e[0].removeAttr("href"):(e.target(e.opts.target),e[0].attr("href",t))})},press:function(t){var e=this,i=e.opts;return Std.func(i.press).call(e,t),i.checkable&&(i.toggleable?e.checked(!i.checked):i.checked||e.checked(!0)),e.emit("press",t)},text:function(t){var e=this,i=e.DOMMap;return e.opt("text",t,function(){"icon"!==e.opts.styleType&&i.text.html(t)})},checked:function(t){var e=this;return e.checkable()?e.opt("checked",t,function(){e[0].toggleClass("checked",t),e.rendered&&e.emit("checked",t)}):void 0===t?e.opts.checked:e},icon:function(t){var e=this.opts,i=this.DOMMap;return this.opt("icon",t,function(){"text"!==e.styleType&&Std.icon.update(i.icon,t,{width:e.iconWidth,height:e.iconHeight})})},iconWidth:function(t){var e=this,i=e.DOMMap;return e.opt("iconWidth",t,function(){i.icon&&("textBesideIcon"===e.styleType()&&i.iconTD.width(t),Std.icon.update(i.icon,{width:t}))})},iconHeight:function(t){var e=this,i=e.DOMMap;return e.opt("iconHeight",t,function(){i.icon&&("textBesideIcon"===e.styleType()&&i.iconTD.height(t),Std.icon.update(i.icon,{height:t}))})},align:function(e){var i=this,n=i.DOMMap;return i.opt("align",e,function(){var t="0 auto";"left"===e?t="0":"right"===e&&(t="0 0 0 auto"),1<i.DOMTreeLevel?n.boxTable.css("margin",t):"icon"===i.styleType()&&n.icon.css("margin",t),i[0].css("text-align",e)})},cells:function(t){var e=this;return e._cells||(e._cells={}),void 0===t?e._cells:isString(t)?e._cells[t]||null:e},addCell:Std.func(function(t,e,i){var n=this,o=n.opts,c=e;if(n._cells||(n._cells={}),!(t in n._cells))return Std.is.DOM(e)||(e=Std.icon.update(c=newDiv("_cell"),e,{width:null,height:null})),c.on("click",function(){n.emit("cellClick",{name:t,cell:c,data:e})}),n._cells[t]=newDom("td").append(c).css({width:o.cellWidth,paddingLeft:o.cellSpacing}),3!==n.DOMTreeLevel&&(n.DOMTreeLevel=3,n.rendered&&(n[0].clear(),n.initDOMTree(),n.resize("height"))),n.rendered&&(n.DOMMap.mainTR1.append(n._cells[t]),n.resize("width")),isFunction(i)&&c.on("click",i),e},{each:[isObject,isArray]}),removeCell:Std.func(function(t){var e=this.opts.width,i=this._cells;i&&i[t]&&(i[t].remove(),delete i[t],this.rendered&&isNumber(e)&&this.width(e))},{each:["isArray isString"]}),styleType:function(t){var e=this,i=e.opts;return void 0===t?i.styleType:(e[0].clear(),e.removeClass("_"+i.styleType).addClass("_"+(i.styleType=t)),e.initDOMTree(),e)}},k:function(t,e){e.cells&&t.addCell(e.cells),e.href&&t.href(e.href),e.checked&&t.checked(!0),t.addClass("_"+e.styleType),t.styleType(e.styleType)},support:{rule:{content:"text"},html:{create:function(t){var e=t.attr("std-icon"),t=t.trimHTML();isEmpty(t)||this.text(t),isString(e)&&this.icon(e)}}}}),Std.ui.module("ToolButton",{nodeName:"a",b:"Button",e:{defaultClass:"StdUI_ToolButton",iconWidth:24,iconHeight:24,text:"ToolButton",tabIndex:null}}),Std.ui.module("ButtonGroup",{b:"widget",e:{defaultClass:"StdUI_ButtonBox",level:2,spacing:5,items:null,tabIndex:null,stretch:!0,autoExclusive:!1,width:"auto",height:"auto",align:"left",styleType:"text",buttonType:"Button",buttonTheme:"default",buttonClassName:"",buttonCheckable:!1,buttonToggleable:!0,buttonFocusedClass:"focused",minWidth:16,minHeight:16,iconWidth:18,iconHeight:18},g:{width:function(){this.rendered&&this.updateLayout()},height:function(){this.rendered&&this.updateLayout()},enable:function(i){this._items.items(function(t,e){e.enable(i)})},destroy:function(){this.clear()},render:function(){this._items.items(function(t,e){e.rendered||e.render()}),this.updateLayout()},remove:function(t){var e=null;isObject(t)&&(t=this.indexOf(t)),(isNumber(t)||isString(t))&&(e=this._items.items(t))&&(e.remove(),this._items.remove(t))}},i:{updateLayout:function(){var t=this,e=t.opts,i=t._items,n=t.spacing(),o=i.length,c=t.width(),s=0,r=0;if(e.stretch&&"auto"!==e.width)for(var a=0;a<o;a++)i._list[a].fixedWidth()&&(c-=i._list[a].width(),s++);for(a=0;a<o;a++){var u=i._list[a];0==n&&(0==a?u[0].css(["border-bottom-right-radius","border-top-right-radius"],0):a==o-1?u[0].css(["border-bottom-left-radius","border-top-left-radius"],0):u[0].css("borderRadius",0)),a<o-1&&(u[0].marginRight(n-(0===n?1:0)),r+=n),u.minHeight()>t.minHeight()&&t.minHeight(u.minHeight()),e.stretch&&("auto"!==e.height&&u.height(t.height()),"auto"===e.width||u.fixedWidth()||u.width((c-(o-s-1)*n)/(o-s)-1+(0==n&&a<o-1?1:0))),r+=u.minWidth()}return t[0].css("text-align",e.align),t.minWidth(r)}},j:{items:function(t,e){return this._items.items(t,e)},spacing:function(t){return this.opt("spacing",t,function(){this.rendered&&this.updateLayout()})},stretch:function(t){return this.opt("stretch",t,function(){this.rendered&&this.updateLayout()})},autoExclusive:function(t){return this.opt("autoExclusive",t)},createButton:function(t){var e,i,n=this,o=this.opts,t=isWidget(t)?t:(e=o.buttonType,i={theme:o.buttonTheme,className:o.buttonClassName,checkable:o.buttonCheckable,toggleable:o.buttonToggleable,focusedClass:o.buttonFocusedClass,styleType:o.styleType,iconWidth:o.iconWidth,iconHeight:o.iconHeight},isString(t)||isNumber(t)?i.text=t:Std.is.action(t)?i.action=t:isObject(t)&&(e=t.ui||e,Std.extend(i,t)),Std.ui(e,i));return isWidget(t)&&t.parent(n).on("checked",function(t){var i=this;o.autoExclusive&&t&&n.items(function(t,e){i!==e&&"checkable"in e&&e.checkable()&&e.checked()&&e.checked(!1)})}),t||null},prepend:function(t,e){return this.insert(t,e,0)},insert:function(t,e,i){var n=this,t=n._items.insert(t,e,i);return n.rendered&&n.__final__("insert",function(){n.updateLayout()}),t},append:function(t,e){var i=this,t=isArray(t)?Std.each(t,function(t,e){return i._items.append(e)},!0):i._items.append(t,e);return i.rendered&&i.__final__("append",function(){i.updateLayout()}),t},clear:function(){return this._items.items(function(t,e){e.destroy()}),this._items.clear(),this}},k:function(i,t){i._items=Std.items(function(t,e){return t=i.createButton(t),isString(e.name)?t.name(e.name):isString(t.name())&&(e.name=t.name()),i[0].insert(t[0],e.index),i.rendered&&t.render(),t}),isArray(t.items)&&i.append(t.items)},support:{rule:{children:"append"},html:{nodeName:["DIV"],create:function(t){function s(i){return Std.each("styleType iconWidth iconHeight",function(t,e){e in n&&(i[e]=n[e])}),i}var r=this,n=r.opts;t.children(function(t,e){var i,n,o=null,c=e.attr("std-ui"),o=isString(c)&&Std.ui(c)?Std.ui.build(e,!1,s({})):(i=(c=e).trimHTML(),n=s({icon:c.attr("std-icon"),action:c.attr("std-action")}),isEmpty(i)||(n.text=i),Std.extend(n,Std.options.get(c)));r.append(e.attr("std-name"),o)})}}}}),Std.ui.module("ToolButtonGroup",{b:"ButtonGroup",e:{buttonType:"ToolButton"}});
"undefined;"