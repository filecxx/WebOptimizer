
var content_auto_click={rules:[],rules_once:[],loop_handlers:{},path:function(){var e=new URL(document.location.href);return e.pathname+e.search}(),match_path:function(e){return""===e||e===content_auto_click.path},add_loop:function(e){content_auto_click.loop_handlers[e.selector]=setInterval(function(){content_auto_click.exec(e.selector)},Math.max(10,e.interval))},update_rules:function(e){for(var t=0;t<e.length;++t){var n=e[t];content_auto_click.match_path(n.path)&&(n.loop&&content_auto_click.add_loop(n),n.once&&content_auto_click.rules_once.push(n))}content_auto_click.rules=e},exec:function(e){try{for(var t=document.querySelectorAll(e),n=0;n<t.length;++n)trigger_click(t[n])}catch(e){}},exec_once:function(e){for(var t=content_auto_click.rules_once,n=0;n<t.length;++n)e?e.matches&&e.matches(t[n].selector)&&trigger_click(e):content_auto_click.exec(t[n].selector)},add:function(e){chrome.runtime.sendMessage({type:"add_auto_click",values:e})},create_rule:function(e){function t(e){return Std.ui("Label",{text:e})}function n(){i.enable(d.value()||_.value())}var o,c=null,l={ui:"Button",styleType:"textBesideIcon",icon:get_extension_url("icons/close.png"),text:lang("cancel"),click:function(){c.close()}},a={ui:"Button",styleType:"textBesideIcon",icon:get_extension_url("icons/cursor.png"),text:lang("test"),click:function(){content_auto_click.exec(s.value())}},i=Std.ui.create("Button",{styleType:"textBesideIcon",icon:get_extension_url("icons/add.png"),text:lang("add"),click:function(){content_auto_click.add({host:u.value(),path:r.value(),selector:s.value(),once:d.value(),loop:_.value(),interval:h.value(),total:p.value()}),c.close()}}),u=Std.ui("LineEdit",{value:window.location.host}),r=Std.ui("LineEdit",{placeHolder:lang("empty_allowed"),value:(o=new URL(document.location.href)).pathname+o.search}),s=Std.ui("TextEdit",{value:e}),d=Std.ui("ToggleBox",{value:1,on:{change:n}}),_=Std.ui("ToggleBox",{value:0,on:{change:function(e){n(),h.enable(e),p.enable(e)}}}),h=Std.ui("SpinBox",{value:1e3,min:10,type:"int",enable:!1}),p=Std.ui("SpinBox",{value:1,min:1,type:"int",enable:!1}),g={ui:"VBoxLayout",items:[{ui:"GridLayout",columnCount:2,items:[t(lang("host")+": "),u,t(lang("path")+": "),r]},t("CSS:"+lang("selector")+": "),s,{ui:"HBoxLayout",items:[t(lang("once")+": "),d,t(lang("loop")+": "),_,t(lang("interval")+"(ms): "),h,t(lang("total")+": "),p]},{ui:"HBoxLayout",items:[l,{ui:"stretch",level:3},a,i]}]},v=newDiv().appendTo("body").css({}),m=v.dom.attachShadow({mode:"open"});content_injector.inject_css("libs/ui/theme/all.css",m,function(){c=Std.ui("Window",{layout:g,title:lang("auto_click"),renderTo:m,height:300,resizable:!1,css:{position:"fixed"},on:{destroy:function(){v.remove()}}})})}};